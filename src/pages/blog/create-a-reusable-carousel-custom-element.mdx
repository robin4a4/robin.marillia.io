---
layout: "../../layouts/post.astro"
title: "Create a reusable carousel custom element"
description: "Use the future scroll timeline API and learn multiple ways to create a reusable carousel custom element."
pubDate: "Aug 07 2023"
heroImage: "/placeholder-hero.jpg"
---

Using the future scroll timeline API, we will create a reusable carousel custom element that should be usable with any framework. This article will show you multiple ways to create a carousel custom element.

## The main idea

The future scroll timeline API is a new API that allows us to create scroll-based animations. It is currently only supported in Chrome and Edge, but it is usable via [this up-to-date polyfill](https://github.com/flackr/scroll-timeline)

There are two APIs, the CSS API and the JS API, both are supported in the polyfill.

## Final result using Astro

```javascript
---
export interface Props {
  itemNumber: number;
}
const { itemNumber } = Astro.props;
---

<carousel-component>
  <ul
    data-slides-container
    class="-mx-16 px-16 pb-16 flex flex-rowoverflow-x-auto flex-no-wrap snap-mandatory snap-x gap-24"
  >
    <slot />
  </ul>
  <div class="flex items-center justify-center gap-8 mt-16 md:hidden">
    {
      [...Array(itemNumber)].map((_, index) => (
        <div
          data-slide-dot={index}
          class="w-12 h-12 mx-2 bg-slate-200 rounded-full"
        />
      ))
    }
  </div>
</carousel-component>

<script>
  import "https://flackr.github.io/scroll-timeline/dist/scroll-timeline.js";

  class CarouselComponent extends HTMLElement {
    keyframes = [
      {
        scale: 1,
        backgroundColor: "#e2e8f0",
      },
      {
        scale: 1.1,
        backgroundColor: "#f472b6",
      },
      {
        scale: 1.3,
        backgroundColor: "#f472b6",
      },
      {
        scale: 1.1,
        backgroundColor: "#f472b6",
      },
      {
        scale: 1,
        backgroundColor: "#e2e8f0",
      },
    ];

    connectedCallback() {
      const slidesContainer = this.querySelector(
        "[data-slides-container]"
      ) as HTMLDivElement;
      const slideDots = this.querySelectorAll(
        "[data-slide-dot]"
      ) as NodeListOf<HTMLDivElement>;
      slideDots.forEach((dot, index) => {
        dot.animate(this.keyframes, {
          fill: "both",
          timeline: new ViewTimeline({
            subject: slidesContainer.children[index],
            axis: "inline",
          }),
        });
      });
    }
  }
  customElements.define("carousel-component", CarouselComponent);
</script>
```
